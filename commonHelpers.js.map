{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n\nasync function getPhotos(query, currentPage) {\n\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    const url = BASE_URL + END_POINT;\n\n    const params = {\n        key: '43031538-631b2ceb9342d78106785df9b',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        pageSize: 15,\n        page: currentPage,\n    };\n\n    try {\n        const res = await axios.get(url, { params });\n        return res.data;\n    } catch (err) {\n        console.log(err)\n    }\n}\n\nexport { getPhotos };\n\n","\nexport function markupMyImages({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n    return `\n        <li class=\"list-item\">\n            <a href=\"${largeImageURL}\" class=\"photo\" data-lightbox=\"photos\">\n                <img src=\"${webformatURL}\" class=\"photo\" data-img=\"${largeImageURL}\">\n            </a>\n            <div class=\"desc\">\n                <ul class=\"info\">\n                    <li class=\"mini-item\">\n                        <h3 class=\"mini-title\">Likes</h3>\n                        <p class=\"about-photo\">${likes}</p>\n                    </li>\n                    <li class=\"mini-item\">\n                        <h3 class=\"mini-title\">Views</h3>\n                        <p class=\"about-photo\">${views}</p>\n                    </li>\n                    <li class=\"mini-item\">\n                        <h3 class=\"mini-title\">Comments</h3>\n                        <p class=\"about-photo\">${comments}</p>\n                    </li>\n                    <li class=\"mini-item\">\n                        <h3 class=\"mini-title\">Downloads</h3>\n                        <p class=\"about-photo\">${downloads}</p>\n                    </li>\n                </ul>\n            </div>\n        </li>\n    `;\n}\n\nexport function markupMyImg(arr) {\n    return arr.map(markupMyImages).join('');\n}","import { getPhotos } from \"./js/pixabay\";\nimport { markupMyImages, markupMyImg } from \"./js/render-function\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nconst list = document.querySelector(\".list\")\nconst form = document.querySelector(\".form\")\nconst moreBtn = document.querySelector(\".more-btn\")\nconst loading = document.querySelector(\".loading\")\nconst loadInBtn = document.querySelector(\".loading-afterBtn\")\nform.addEventListener(\"submit\", handleSubmit)\nmoreBtn.addEventListener(\"click\", loadMore)\n\nlet currentPage = 1;\nlet maxPage = 0;\nconst pageSize = 15;\nlet inputValue\nhideLoadMore()\nconst galleryCardHeight = document.querySelector('.list-item').getBoundingClientRect().height;\n\nloadingHideMoreBtn()\n\nasync function handleSubmit(event) {\n    event.preventDefault()\n\n inputValue = event.target.elements.search.value\n    currentPage = 1\n       if (!inputValue) {\n    return iziToast.error({\n           title: 'Hey',\n           message: \"Write something to search\",\n           theme: 'dark',\n          backgroundColor: 'red',\n          position: 'topCenter',\n          color: 'black',\n});\n    }\n    loadingShow()\n    \n    try {\n        const data = await getPhotos(inputValue, currentPage)\n        maxPage = Math.ceil(data.totalHits / pageSize);\n\n        if (maxPage === 0) {\n          return iziToast.error({\n           title: 'Hey',\n           message: \"You have reached the end\",\n           theme: 'dark',\n          backgroundColor: 'red',\n          position: 'topCenter',\n          color: 'black',\n});\n        }\n\n         loadingHide()\n        list.innerHTML = markupMyImg(data.hits) \n        showLoadMore()\n\n        window.scrollBy({\n            top: galleryCardHeight * 2,\n            behavior: 'smooth'\n        });\n\n    } catch (error) {\n        console.log(error)\n    }\n\n}\n\nasync function loadMore(event) {\n    try {\n        hideLoadMore()\n        loadingShowMoreBtn()\n        const load = await getPhotos(inputValue, currentPage += 1)\n        if (maxPage <= currentPage) {\n         hideLoadMore()\n        }\n\n        loadingHideMoreBtn()\n        list.insertAdjacentHTML(\"beforeend\", markupMyImg(load.hits)) \n        showLoadMore()\n    } catch (err) {\n        console.log(err)\n    }\n}\n\n\nfunction showLoadMore() {\n    moreBtn.classList.remove(\"hide\")\n}\n\nfunction hideLoadMore() {\n    moreBtn.classList.add(\"hide\")\n}\n\n\n\n\nfunction loadingHide() {\n    loading.classList.add(\"hide\")\n}\n\nfunction loadingShow() {\n    loading.classList.remove(\"hide\")\n}\n\n\n\nfunction loadingHideMoreBtn() {\n    loadInBtn.classList.add(\"hide\")\n}\n\nfunction loadingShowMoreBtn() {\n    loadInBtn.classList.remove(\"hide\")\n}"],"names":["getPhotos","query","currentPage","url","params","axios","err","markupMyImages","webformatURL","largeImageURL","tags","likes","views","comments","downloads","markupMyImg","arr","list","form","moreBtn","loading","loadInBtn","handleSubmit","loadMore","maxPage","pageSize","inputValue","hideLoadMore","galleryCardHeight","loadingHideMoreBtn","event","iziToast","loadingShow","data","loadingHide","showLoadMore","error","loadingShowMoreBtn","load"],"mappings":"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"}