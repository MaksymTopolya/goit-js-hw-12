{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nasync function getPhotos(query, currentPage) {\n    loadingIndicatorShow()\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    const url = BASE_URL + END_POINT;\n\n    const params = {\n        key: '43031538-631b2ceb9342d78106785df9b',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        pageSize: 15,\n        page: currentPage,\n    };\n\n    try {\n        const res = await axios.get(url, { params });\n        return res.data;\n    } catch (err) {\n        return iziToast.error({\n           title: 'Hey',\n           message: [err],\n           theme: 'dark',\n          backgroundColor: 'red',\n          position: 'topCenter',\n          color: 'black',\n});\n    } finally {\n        loadingIndicatorHide()\n    }\n}\nconst loadingIndicator = document.querySelector(\".loading\")\n\nfunction loadingIndicatorHide() {\n    loadingIndicator.classList.add(\"hide\")\n}\n\nfunction loadingIndicatorShow() {\n    loadingIndicator.classList.remove(\"hide\")\n}\n\n\nexport { getPhotos };\n\n","\nexport function markupMyImages({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n    return `\n        <li class=\"list-item\">\n            <a href=\"${largeImageURL}\" class=\"photo\" data-lightbox=\"photos\">\n                <img src=\"${webformatURL}\" class=\"photo\" data-img=\"${largeImageURL}\">\n            </a>\n            <div class=\"desc\">\n                <ul class=\"info\">\n                    <li class=\"mini-item\">\n                        <h3 class=\"mini-title\">Likes</h3>\n                        <p class=\"about-photo\">${likes}</p>\n                    </li>\n                    <li class=\"mini-item\">\n                        <h3 class=\"mini-title\">Views</h3>\n                        <p class=\"about-photo\">${views}</p>\n                    </li>\n                    <li class=\"mini-item\">\n                        <h3 class=\"mini-title\">Comments</h3>\n                        <p class=\"about-photo\">${comments}</p>\n                    </li>\n                    <li class=\"mini-item\">\n                        <h3 class=\"mini-title\">Downloads</h3>\n                        <p class=\"about-photo\">${downloads}</p>\n                    </li>\n                </ul>\n            </div>\n        </li>\n    `;\n}\n\nexport function markupMyImg(arr) {\n    return arr.map(markupMyImages).join('');\n}","import { getPhotos } from \"./js/pixabay\";\nimport { markupMyImages, markupMyImg } from \"./js/render-function\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nconst list = document.querySelector(\".list\")\nconst form = document.querySelector(\".form\")\nconst moreBtn = document.querySelector(\".more-btn\")\nconst loadingAfterButton = document.querySelector(\".loading-afterBtn\")\nform.addEventListener(\"submit\", handleSubmit)\nmoreBtn.addEventListener(\"click\", loadMore)\n\nlet currentPage = 1;\nlet maxPage = 0;\nconst pageSize = 15;\nlet searchQuery \nhideLoadMore()\nloadingAfterButtonHide()\n\nasync function handleSubmit(event) {\n    event.preventDefault()\n    list.innerHTML = ''\n\n searchQuery = event.target.elements.search.value\n    currentPage = 1\n       if (!searchQuery) {\n    return iziToast.error({\n           title: 'Hey',\n           message: \"Write something to search\",\n           theme: 'dark',\n          backgroundColor: 'red',\n          position: 'topCenter',\n          color: 'black',\n});\n    }\n    \n    try {\n        const data = await getPhotos(searchQuery, currentPage)\n        maxPage = Math.ceil(data.totalHits / pageSize);\n        if (data.hits.length === 0) {\n          return iziToast.error({\n           title: 'Hey',\n           message: \"We can not find something\",\n           theme: 'dark',\n          backgroundColor: 'red',\n          position: 'topCenter',\n          color: 'black',\n});\n        }\n          if (data.hits.length < 15) {\n            hideLoadMore()\n        }\n\n        list.innerHTML = markupMyImg(data.hits) \n\n        if (maxPage > currentPage) {\n            showLoadMore();\n        }\n\n    } catch (error) {\n        return iziToast.error({\n           title: 'Hey',\n           message: [error],\n           theme: 'dark',\n          backgroundColor: 'red',\n          position: 'topCenter',\n          color: 'black',\n});\n    } finally {\n        scrollToLoadedImages();\n    }\n\n}\n\nasync function loadMore(event) {\n    try {\n        hideLoadMore()\n        loadingAfterButtonShow()\n        let load; \n\n        if (maxPage > currentPage) {\n            load = await getPhotos(searchQuery, currentPage += 1)\n        }\n        if (maxPage <= currentPage) {\n            hideLoadMore()\n            return\n        }\n\n        loadingAfterButtonHide()\n        list.insertAdjacentHTML(\"beforeend\", markupMyImg(load.hits))\n        showLoadMore()\n    } catch (err) {\n        console.error(err); \n        return iziToast.error({\n           title: 'Hey',\n           message: [err],\n           theme: 'dark',\n          backgroundColor: 'red',\n          position: 'topCenter',\n          color: 'black',\n        });\n    } finally {\n        scrollToLoadedImages();\n    }\n}\n\nfunction scrollToLoadedImages() {\n    const galleryCardHeight = document.querySelector('.list-item').getBoundingClientRect().height;\n    window.scrollBy({\n        top: galleryCardHeight * 2,\n        behavior: 'smooth'\n    });\n}\n\n\nfunction showLoadMore() {\n    moreBtn.classList.remove(\"hide\")\n}\n\nfunction hideLoadMore() {\n    moreBtn.classList.add(\"hide\")\n}\n\n\n\nfunction loadingAfterButtonHide() {\n    loadingAfterButton.classList.add(\"hiden\")\n}\n\nfunction loadingAfterButtonShow() {\n    loadingAfterButton.classList.remove(\"hiden\")\n}"],"names":["getPhotos","query","currentPage","loadingIndicatorShow","url","params","axios","err","iziToast","loadingIndicatorHide","loadingIndicator","markupMyImages","webformatURL","largeImageURL","tags","likes","views","comments","downloads","markupMyImg","arr","list","form","moreBtn","loadingAfterButton","handleSubmit","loadMore","maxPage","pageSize","searchQuery","hideLoadMore","loadingAfterButtonHide","event","data","showLoadMore","error","scrollToLoadedImages","loadingAfterButtonShow","load","galleryCardHeight"],"mappings":"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"}